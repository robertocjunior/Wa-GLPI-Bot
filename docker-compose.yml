version: '3'
services:
  node:
    build: https://github.com/robertocjunior/Wa-GLPI-Bot.git
    command: "npm run start"
    working_dir: /home/node/app
    environment:
      - NODE_ENV=production
    expose:
      - "3000"
    ports:
      - "3000:3000"
    restart: unless-stopped
    stop_grace_period: 45s # Aumentado para dar mais tempo para o Chromium fechar
    volumes:
      - whatsapp_session_data:/home/node/app/whatsapp_session_data
      - glpi_config_file:/home/node/app/glpi_config.json
      - anexos_data:/home/node/app/anexos

volumes:
  whatsapp_session_data:
  glpi_config_file:
  anexos_data:
